%survey_model_1.m

Pr_win = 2.0/36;
Pr_lose = 34.0/36;
%       0       1       2       3      4    5       6        7     8   9 10  
% x = [v(25), v(-1), v(300), v(100), v(1), v(12), v(0.5), v(0.10), S1, S2, S3]

Aeq = [%4 main equations
    Pr_win, Pr_lose,      0,      0,   -1,     0,      0,       0,  0,  0,  0;
    0     , Pr_lose, Pr_win,      0,    0,    -1,      0,       0,  1,  0,  0;
    0     , Pr_lose, Pr_win,      0,    0,     0,     -1,       0,  0, -1,  0;
    0     , Pr_lose,      0, Pr_win,    0,     0,      0,      -1,  0,  0, -1;
    ];
beq = [0, 0, 0, 0];

%       0       1       2       3      4    5       6        7     8   9 10  
% x = [v(25), v(-1), v(300), v(100), v(1), v(12), v(0.5), v(0.10), S1, S2, S3]
A = [%bounds on slack vars
           0,     0,      0,      0,    0,     0,      0,       0, -1,  0,  0;
           0,     0,      0,      0,    0,     0,      0,       0,  0, -1,  0;
           0,     0,      0,      0,    0,     0,      0,       0,  0,  0, -1;
     %bounds relating value function vars
           0,     1,      0,      0,    0,     0,      0,       0,  0,  0, 0;
           0,     0,      0,      0,    0,     0,      0,      -1,  0,  0, 0;
           0,     0,      0,      0,    0,     0,     -1,       1,  0,  0, 0;
           0,     0,      0,      0,   -1,     0,      1,       0,  0,  0, 0;
           0,     0,      0,      0,    1,    -1,      0,       0,  0,  0, 0;
          -1,     0,      0,      0,    0,     1,      0,       0,  0,  0, 0;
           1,     0,      0,     -1,    0,     0,      0,       0,  0,  0, 0;
           0,     0,     -1,      1,    0,     0,      0,       0,  0,  0, 0;
];

b = [
    0 ... %-S1 < 0
    0 ... %-S2 < 0
    0 ... %-S3 < 0
    0 ... %v(-1) < 0
    0 ... %-v(0.10) < 0
    0 ... %v(0.10) < v(0.50)
    0 ... %v(0.50) < v(1)
    0 ... %v(1) < v(12)
    0 ... %v(12) < v(25)
    0 ... %v(25) < v(100)
    0 ... %v(100) < v(300)];
   ];
%VR : (popular votes)/(unpopular votes) - 1
VR1 = 0.21641791;
VR2 = 3.033898305;
VR3 = 3.5;
% x = [v(25), v(-1), v(300), v(100), v(1), v(12), v(0.5), v(0.10), S1, S2, S3]
f1 = [  0,Pr_lose*VR1, Pr_win*VR1, 0,   0,     0,      0,       0,  -1,  0,  0];
f2 = [     0,     0,      0,      0,    0,     0,    VR2,       0,  0,  -1,  0];
f3 = [     0,     0,      0,      0,    0,     0,      0,     VR3,  0,  0,  -1];
f = f1 + f2 + f3;

[x, fval] = linprog(f, A, b, Aeq, beq);

